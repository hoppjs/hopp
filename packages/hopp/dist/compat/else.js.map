{"version":3,"sources":["../../src/compat/else.js"],"names":["version","require","lock","lt","v","sc","lte","Error"],"mappings":";;;;;;AAMA;;;;;;AAEA,MAAM,EAAEA,OAAF,KAAcC,QAAQ,oBAAR,CAApB,C,CARA;;;;;;kBAUeC,QAAQ;AACrB,MAAI,iBAAOC,EAAP,CAAUD,KAAKE,CAAf,EAAkB,gBAAlB,CAAJ,EAAyC;AACvCF,SAAKE,CAAL,GAASJ,OAAT;;AAEA;AACA;AACA;AACA,WAAOE,KAAKG,EAAZ;;AAEA,WAAOH,IAAP;AACD;;AAED;AACA;AACA,MAAI,iBAAOI,GAAP,CAAWJ,KAAKE,CAAhB,EAAmBJ,OAAnB,CAAJ,EAAiC;AAC/BE,SAAKE,CAAL,GAASJ,OAAT;AACA,WAAOE,IAAP;AACD;;AAED,QAAM,IAAIK,KAAJ,CAAU,uEAAuEL,KAAKE,CAAtF,CAAN;AACD,C","file":"../../src/compat/else.js","sourcesContent":["/**\n * @file src/compat/else.js\n * @license MIT\n * @copyright 2017 10244872 Canada Inc.\n */\n\nimport semver from 'semver'\n\nconst { version } = require('../../package.json')\n\nexport default lock => {\n  if (semver.lt(lock.v, '1.0.0-alpha.11')) {\n    lock.v = version\n\n    // below alpha 11, there are race conditions with\n    // the state cache - so discard it and let it be\n    // reconstructed\n    delete lock.sc\n\n    return lock\n  }\n\n  // final rule if all else passes is to just allow the\n  // updating by changing the version number\n  if (semver.lte(lock.v, version)) {\n    lock.v = version\n    return lock\n  }\n\n  throw new Error('Sorry, this version of hopp does not support lockfiles from hopp v' + lock.v)\n}\n"]}