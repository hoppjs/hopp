{"version":3,"sources":["../../src/hoppfile/find.js"],"names":["find","require","debug","directory","files","filter","f","length","Error","dirname"],"mappings":";;;;;kBAiBwBA,I;;AAXxB;;;;AACA;;;;AAPA;;;;;;eASkBC,QAAQ,cAAR,EAAwB,MAAxB,C;IAAVC,K,YAAAA,K;;AAER;;;;;;;;AAMe,SAASF,IAAT,CAAeG,SAAf,EAA0B;AACvC,MAAMC,QAAQ,qBAAYD,SAAZ,EAAuBE,MAAvB,CAA8B;AAAA,WAAKC,MAAM,aAAX;AAAA,GAA9B,CAAd;;AAEAJ,QAAM,0BAAN,EAAkCE,MAAMG,MAAxC,EAAgDJ,SAAhD;;AAEA,MAAIC,MAAMG,MAAN,KAAiB,CAAjB,IAAsBJ,cAAc,GAAxC,EAA6C;AAC3C,UAAM,IAAIK,KAAJ,CAAU,4BAAV,CAAN;AACD;;AAED,SAAOJ,MAAMG,MAAN,KAAiB,CAAjB,GAAqBJ,SAArB,GAAiCH,KAAK,eAAKS,OAAL,CAAaN,SAAb,CAAL,CAAxC;AACD","file":"../../src/hoppfile/find.js","sourcesContent":["/**\n * @file src/utils/load.js\n * @license MIT\n * @copyright 2017 10244872 Canada Inc.\n */\n\nimport path from 'path'\nimport { readdirSync } from 'fs'\n\nconst { debug } = require('../utils/log')('hopp')\n\n/**\n * Looks for hoppfile.js in {directory} and its parents.\n * @param {String} directory\n * @returns {String} the directory in which the file exists\n * @throws {Error} if file was not found\n */\nexport default function find (directory) {\n  const files = readdirSync(directory).filter(f => f === 'hoppfile.js')\n\n  debug('found %s hoppfiles in %s', files.length, directory)\n\n  if (files.length === 0 && directory === '/') {\n    throw new Error('Failed to find hoppfile.js')\n  }\n\n  return files.length === 1 ? directory : find(path.dirname(directory))\n}\n"]}